{"version":3,"file":"background.b07ee8b0d2aafa807614.hot-update.js","mappings":"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","sources":["webpack://tean-mate/./3-background/background.js","webpack://tean-mate/webpack/runtime/getFullHash"],"sourcesContent":["import { initializeVoices } from \"../2-features/TTS/initializeVoices.js\";\n\nclass BackgroundHandler {\n  constructor() {\n    this.commands = {\n      \"skip-next\": \"skipToNext\",\n      \"skip-previous\": \"skipToPrevious\",\n      \"toggle-reading\": \"toggleReading\",\n      \"access-link\": \"accessLink\",\n    };\n\n    this.voiceAssistant = new ArtyomAssistant();\n    this.initialize();\n  }\n\n  initialize() {\n    chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this));\n    chrome.action.onClicked.addListener(this.onActionClicked.bind(this));\n    chrome.commands.onCommand.addListener(this.onCommand.bind(this));\n    chrome.runtime.onMessage.addListener(this.onMessage.bind(this));\n\n    // Initialize the TTS voices\n    this.initializeVoices();\n\n    // Start listening for voice commands\n    this.setupVoiceCommands();\n  }\n\n  setupVoiceCommands() {\n    this.voiceAssistant.addCommand(\"open sidebar\", () => {\n      chrome.action.onClicked.dispatch(); // Trigger the extension button programmatically\n    });\n\n    this.voiceAssistant.addCommand(\"close sidebar\", () => {\n      console.log(\"Close sidebar command detected\");\n      // Add functionality to close the sidebar if needed\n    });\n\n    this.voiceAssistant.startListening(); // Start voice recognition\n  }\n\n  async initializeVoices() {\n    try {\n      const voices = await initializeVoices();\n      chrome.storage.local.set({ voices });\n      console.log(\"Voices initialized:\", voices);\n    } catch (error) {\n      console.error(\"Failed to initialize voices:\", error);\n    }\n  }\n\n  onInstalled() {\n    console.log(\"Extension installed\");\n  }\n\n  onActionClicked() {\n    console.log(\"Action icon clicked\");\n  }\n\n  onCommand(command) {\n    const action = this.commands[command];\n    if (action) {\n      this.sendMessageToActiveTab({ action });\n    } else {\n      console.warn(`Unknown command: ${command}`);\n    }\n  }\n\n  onMessage(request, sender, sendResponse) {\n    if (request.action === \"getVoices\") {\n      chrome.storage.local.get(\"voices\", (result) => {\n        sendResponse({ voices: result.voices });\n      });\n      return true;\n    }\n  }\n\n  sendMessageToActiveTab(message) {\n    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n      if (tabs.length > 0) {\n        chrome.tabs.sendMessage(tabs[0].id, message);\n      } else {\n        console.warn(\"No active tab found\");\n      }\n    });\n  }\n}\n\nnew BackgroundHandler();","__webpack_require__.h = () => (\"5bb763f12d62f80b0062\")"],"names":["initializeVoices","BackgroundHandler","_classCallCheck","commands","voiceAssistant","ArtyomAssistant","initialize","_createClass","key","value","_context","_context2","_context3","_context4","chrome","runtime","onInstalled","addListener","_bindInstanceProperty","call","action","onClicked","onActionClicked","onCommand","onMessage","setupVoiceCommands","addCommand","dispatch","console","log","startListening","_initializeVoices2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","voices","wrap","_callee$","_context5","prev","next","sent","storage","local","set","t0","error","stop","apply","arguments","command","sendMessageToActiveTab","warn","concat","request","sender","sendResponse","get","result","message","tabs","query","active","currentWindow","length","sendMessage","id"],"sourceRoot":""}