{"version":3,"file":"background.ff3f16333abf7b978bbb.hot-update.js","mappings":"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","sources":["webpack://tean-mate/./3-background/background.js","webpack://tean-mate/webpack/runtime/getFullHash"],"sourcesContent":["import { initializeVoices } from \"../2-features/TTS/initializeVoices.js\";\n\nclass BackgroundHandler {\n  constructor() {\n      this.commands = {\n          \"skip-next\": \"skipToNext\",\n          \"skip-previous\": \"skipToPrevious\",\n          \"toggle-reading\": \"toggleReading\",\n          \"access-link\": \"accessLink\",\n          \"toggle-stt\": \"toggleSTT\", // New command for STT activation\n      };\n\n      this.initialize();\n  }\n\n  initialize() {\n      chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this));\n      chrome.action.onClicked.addListener(this.onActionClicked.bind(this));\n      chrome.commands.onCommand.addListener(this.onCommand.bind(this));\n      chrome.runtime.onMessage.addListener(this.onMessage.bind(this));\n\n      // Initialize the TTS voices\n      this.initializeVoices();\n  }\n\n  async initializeVoices() {\n      try {\n          const voices = await initializeVoices();\n          chrome.storage.local.set({ voices });\n          console.log(\"Voices initialized:\", voices);\n      } catch (error) {\n          console.error(\"Failed to initialize voices:\", error);\n      }\n  }\n\n  onInstalled() {\n      console.log(\"Extension installed\");\n  }\n\n  onActionClicked() {\n      console.log(\"Action icon clicked\");\n  }\n\n  onCommand(command) {\n      const action = this.commands[command];\n      if (action) {\n          this.sendMessageToActiveTab({ action });\n      } else {\n          console.warn(`Unknown command: ${command}`);\n      }\n  }\n\n  onMessage(request, sender, sendResponse) {\n      if (request.action === \"getVoices\") {\n          chrome.storage.local.get(\"voices\", (result) => {\n              sendResponse({ voices: result.voices });\n          });\n          return true; // Indicate async response\n      }\n  }\n\n  sendMessageToActiveTab(message) {\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n          if (tabs.length > 0) {\n              chrome.tabs.sendMessage(tabs[0].id, message);\n          } else {\n              console.warn(\"No active tab found\");\n          }\n      });\n  }\n}\n\n// Instantiate the BackgroundHandler\nnew BackgroundHandler();","__webpack_require__.h = () => (\"0cdc6b8099e77c741d19\")"],"names":["initializeVoices","BackgroundHandler","_classCallCheck","commands","initialize","_createClass","key","value","_context","_context2","_context3","_context4","chrome","runtime","onInstalled","addListener","_bindInstanceProperty","call","action","onClicked","onActionClicked","onCommand","onMessage","_initializeVoices2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","voices","wrap","_callee$","_context5","prev","next","sent","storage","local","set","console","log","t0","error","stop","apply","arguments","command","sendMessageToActiveTab","warn","concat","request","sender","sendResponse","get","result","message","tabs","query","active","currentWindow","length","sendMessage","id"],"sourceRoot":""}