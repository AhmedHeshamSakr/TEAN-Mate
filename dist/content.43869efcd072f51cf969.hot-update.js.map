{"version":3,"file":"content.43869efcd072f51cf969.hot-update.js","mappings":"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","sources":["webpack://tean-mate/./4-content/content.js","webpack://tean-mate/webpack/runtime/getFullHash"],"sourcesContent":["import HighlightBox from \"../2-features/TTS/HighlightBox.js\";\nimport TextExtractor  from \"../2-features/TTS/TextExtractor.js\";\nimport  SpeechHandler  from \"../2-features/TTS/SpeechHandler.js\";\nimport  LinkHandler  from \"../2-features/TTS/LinkHandler.js\";\n\nclass ContentHandler {\n    constructor() {\n        this.sections = [];\n        this.currentIndex = 0;\n        this.pastBorderStyle = \"\";\n        this.pastBackgroundStyle = \"\";\n\n        this.highlightBox = new HighlightBox();\n        this.textExtractor = new TextExtractor();\n        this.speechHandler = new SpeechHandler();\n        this.linkHandler = new LinkHandler();\n        this.currentElement = null;\n        this.elements = Array.from(document.body.querySelectorAll('*'));\n\n        chrome.runtime.onMessage.addListener(this.handleMessage.bind(this));\n    }\n\n    getNextElement(startIndex) {\n        // Start iterating from the current position\n        for (let i = startIndex; i < this.elements.length; i++) {\n            const element = this.elements[i];\n            if (this.isElementVisible(element)) {\n                const text = this.textExtractor.extractText(element);\n                if (text.trim()) {\n                    this.currentIndex = i;\n                    return { element, text };\n                }\n            }\n        }\n        return null; // No more valid elements\n    }\n\n    prevElement(startIndex) {\n        // Start iterating backward from the current position\n        for (let i = startIndex-1; i >= 0; i--) {\n            const element = this.elements[i];\n            if (this.isElementVisible(element)) {\n                const text = this.textExtractor.extractText(element);\n                if (text.trim()) {\n                    this.currentIndex = i;\n                    return { element, text };\n                }\n            }\n        }\n        return null; // No more valid elements\n    }\n\n    speakCurrentSection() {\n        if (!this.currentElement) {\n            this.currentElement = this.getNextElement(this.currentIndex);\n        }\n\n        if (!this.currentElement) {\n            // No more elements to process\n            return;\n        }\n\n        const { element, text } = this.currentElement;\n\n        this.highlightBox.addHighlight(element);\n        this.speechHandler.speak(text, () => {\n            this.highlightBox.removeHighlight(element);\n            this.currentIndex++;\n            this.currentElement = null; // Prepare for the next element\n            this.speakCurrentSection();\n        });\n    }\n\n    handleMessage(request) {\n        if (request.action === \"extractText\") {\n            this.currentIndex = 0;\n            this.currentElement = null;\n            this.speakCurrentSection();\n        } else if (request.action === \"skipToNext\") {\n            this.speechHandler.stop();\n            this.highlightBox.removeHighlight(this.currentElement?.element);\n            this.currentIndex++;\n            this.currentElement = null;\n            this.speakCurrentSection();\n        } else if (request.action === \"skipToPrevious\") {\n            this.speechHandler.stop();\n            this.highlightBox.removeHighlight(this.currentElement?.element);\n            // this.currentIndex = Math.max(0, this.currentIndex - 1);\n            this.textExtractor.clearProcessedElements();\n            this.currentElement = this.prevElement(this.currentIndex);\n            this.speakCurrentSection();\n        } else if (request.action === \"toggleReading\") {\n            if (this.speechHandler.isSpeaking) {\n                this.speechHandler.stop();\n                this.highlightBox.removeHighlight(this.currentElement?.element);\n            } else {\n                this.speakCurrentSection();\n            }\n        } else if (request.action === \"accessLink\") {\n            if (this.currentElement) {\n                this.linkHandler.accessLink(this.currentElement.element);\n                this.speechHandler.stop();\n            }\n        }else if (request.action === \"performSearch\"){\n            window.open(`https://www.google.com/search?q=${encodeURIComponent(request.query)}`, '_blank');\n        }\n    }\n\n    isElementVisible(element) {\n        const rect = element.getBoundingClientRect();\n        const isVisible = rect.top >= 0 &&\n                          rect.left >= 0;\n        const isNotHidden = window.getComputedStyle(element).visibility !== 'hidden' &&\n                            window.getComputedStyle(element).display !== 'none';\n        return isVisible && isNotHidden;\n    }\n}\n\n// Instantiate the content handler\nnew ContentHandler();","__webpack_require__.h = () => (\"f0d411d850136a32ca57\")"],"names":["HighlightBox","TextExtractor","SpeechHandler","LinkHandler","ContentHandler","_context","_classCallCheck","sections","currentIndex","pastBorderStyle","pastBackgroundStyle","highlightBox","textExtractor","speechHandler","linkHandler","currentElement","elements","_Array$from","document","body","querySelectorAll","chrome","runtime","onMessage","addListener","_bindInstanceProperty","handleMessage","call","_createClass","key","value","getNextElement","startIndex","i","length","element","isElementVisible","text","extractText","_trimInstanceProperty","prevElement","speakCurrentSection","_this","_this$currentElement","addHighlight","speak","removeHighlight","request","action","_this$currentElement2","stop","_this$currentElement3","clearProcessedElements","isSpeaking","_this$currentElement4","accessLink","window","open","concat","encodeURIComponent","query","rect","getBoundingClientRect","isVisible","top","left","isNotHidden","getComputedStyle","visibility","display"],"sourceRoot":""}