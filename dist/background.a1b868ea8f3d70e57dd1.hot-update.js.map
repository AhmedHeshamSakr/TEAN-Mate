{"version":3,"file":"background.a1b868ea8f3d70e57dd1.hot-update.js","mappings":"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","sources":["webpack://tean-mate/./3-background/background.js","webpack://tean-mate/webpack/runtime/getFullHash"],"sourcesContent":["import { initializeVoices } from \"../2-features/TTS/initializeVoices.js\";\nimport  ArtyomAssistant  from \"../2-features/STT/ArtyomHandller.js\";\n\nclass BackgroundHandler {\n  constructor() {\n      this.commands = {\n          \"skip-next\": \"skipToNext\",\n          \"skip-previous\": \"skipToPrevious\",\n          \"toggle-reading\": \"toggleReading\",\n          \"access-link\": \"accessLink\",\n          \"start-stt\": \"startSpeechRecognition\", // New command\n          \"stop-stt\": \"stopSpeechRecognition\",   // New command\n      };\n      this.initialize();\n      this.artyomAssistant = new ArtyomAssistant(); // Initialize ArtyomAssistant\n    \n  }\n\n  initialize() {\n      chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this));\n      chrome.action.onClicked.addListener(this.onActionClicked.bind(this));\n      chrome.commands.onCommand.addListener(this.onCommand.bind(this));\n      chrome.runtime.onMessage.addListener(this.onMessage.bind(this));\n\n      // Initialize the TTS voices\n      this.initializeVoices();\n      \n  }\n\n    initializeVoiceCommands() {\n        this.artyomAssistant.addCommand(\"toggle listening\", () => this.artyomAssistant.toggleListening());\n        this.artyomAssistant.startListening();\n    }\n\n  async initializeVoices() {\n        try {\n            const voices = await initializeVoices();\n            chrome.storage.local.set({ voices });\n            console.log(\"Voices initialized:\", voices);\n        } catch (error) {\n            console.error(\"Failed to initialize voices:\", error);\n        }\n  }\n\n  onInstalled() {\n      // Placeholder for installation logic, if needed in the future\n      console.log(\"Extension installed\");\n  }\n\n  onActionClicked() {\n      // Placeholder for action click logic, if needed in the future\n      console.log(\"Action icon clicked\");\n  }\n\n  onCommand(command) {\n      const action = this.commands[command];\n      if (action) {\n          this.sendMessageToActiveTab({ action });\n      } else {\n          console.warn(`Unknown command: ${command}`);\n      }\n  }\n\n  onMessage(request, sender, sendResponse) {\n        if (request.action === \"getVoices\") {\n            chrome.storage.local.get(\"voices\", (result) => {\n                sendResponse({ voices: result.voices });\n            });\n            return true;\n        }\n  }\n\n  sendMessageToActiveTab(message) {\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n          if (tabs.length > 0) {\n              chrome.tabs.sendMessage(tabs[0].id, message);\n          } else {\n              console.warn(\"No active tab found\");\n          }\n      });\n  }\n}\n\n// Instantiate the BackgroundHandler\nnew BackgroundHandler();\n","__webpack_require__.h = () => (\"cc1038e847ac615bbdb5\")"],"names":["initializeVoices","ArtyomAssistant","BackgroundHandler","_classCallCheck","commands","initialize","artyomAssistant","_createClass","key","value","_context","_context2","_context3","_context4","chrome","runtime","onInstalled","addListener","_bindInstanceProperty","call","action","onClicked","onActionClicked","onCommand","onMessage","initializeVoiceCommands","_this","addCommand","toggleListening","startListening","_initializeVoices2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","voices","wrap","_callee$","_context5","prev","next","sent","storage","local","set","console","log","t0","error","stop","apply","arguments","command","sendMessageToActiveTab","warn","concat","request","sender","sendResponse","get","result","message","tabs","query","active","currentWindow","length","sendMessage","id"],"sourceRoot":""}